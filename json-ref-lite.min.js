(function(){var t,e,n;e=("undefined"==typeof window||null===window)&&require("fs"),n=!(!e||!e.existsSync(__dirname+"/../sync-request"))&&require("sync-request"),t=function(){var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,e=/^\d+$/,n=/^\d/,r=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i={},o={};function s(t,e,n){var r,i,o,s,h=t.length;for(i=0;i<h;i++)(r=t[i])&&(u(r)&&(r='"'+r+'"'),o=!(s=c(r))&&/^\d+$/.test(r),e.call(n,r,s,o,i,t))}function c(t){return"string"==typeof t&&t&&-1!==["'",'"'].indexOf(t.charAt(0))}function u(t){return!c(t)&&(function(t){return t.match(n)&&!t.match(e)}(t)||function(t){return r.test(t)}(t))}return{expr:h,setter:function(t){return i[t]||(i[t]=new Function("data, value",h(t,"data")+" = value"))},getter:function(t,e){var n=t+"_"+e;return o[n]||(o[n]=new Function("data","return "+h(t,e,"data")))},split:function(e){return e.match(t)},join:function(t){return t.reduce(function(t,n){return t+(c(n)||e.test(n)?"["+n+"]":(t?".":"")+n)},"")},forEach:function(e,n,r){s(e.match(t),n,r)}};function h(e,n,r){return"string"==typeof n&&(r=n,n=!1),r=r||"data",(e=e||"")&&"["!==e.charAt(0)&&(e="."+e),n?function(e,n){var r,i=n,o=e.match(t);return s(o,function(t,e,n,o,s){r=o===s.length-1,i+=(t=e||n?"["+t+"]":"."+t)+(r?")":" || {})")}),new Array(o.length+1).join("(")+i}(e,r):r+e}}(),LITHIUM.jsonRefLite=function(){return this.cache={},this.extendtoken="$extend",this.reftoken="$ref",this.pathtoken="#",this.debug=!1,this.clone=function(t){var e,n;if(null===t||"object"!=typeof t||"function"==typeof t)return t;for(e in n=t.constructor(),t)n[e]=this.clone(t[e]);return n},this.findIds=function(t,e){var n,r,i,o;for(r in n=!1,i={},t)o=t[r],null!=t.id&&(n=t.id),n&&"id"!==r&&(i[r]=o),"object"==typeof o&&this.findIds(o,e);if(n)return e[n]=i},this.get_json_pointer=function(e,n){var r,i,o;"."===(i=(i=e.replace(/\\\//,"#SLASH#").replace(/\//g,".").replace(/#SLASH#/,"/")).replace(new RegExp("^"+this.pathtoken),""))[0]&&(i=i.substr(1,i.length-1));try{this.debug&&console.log("evaluating '"+i+"'"),o=t.getter(i)(n)}catch(r){r,o=""}return o},this.replace=function(t,r,i){var o,s,c,u,h,l,a,f,p;for(s in l=[],t)p=t[s],this.debug&&"string"==typeof c&&console.log("checking "+s),null!=p&&null!=p[reftoken]?(c=p[reftoken],this.debug&&"string"==typeof c&&console.log("checking "+s+" -> "+c),Object.keys(p).length>1&&console.error("json-ref-lite error: object '"+s+"' contains reference as well as other properties..ignoring properties"),Array.isArray(c)?c=this.replace(c,r,i):null!=r[c]?t[s]=r[c]:n&&String(c).match(/^https?:/)?(f=c.match(/^[^#]*/),this.cache[f]||(this.cache[f]=this.resolve(JSON.parse(n("GET",f).getBody().toString()))),t[s]=this.cache[f],c.match(this.pathtoken)&&(o=c.replace(new RegExp(".*"+pathtoken),this.pathtoken)).length&&(t[s]=this.get_json_pointer(o,t[s]))):e&&e.existsSync(c)?(a=e.readFileSync(c).toString()).match(/module\.exports/)?t[s]=this.resolve(require(c)):t[s]=this.resolve(JSON.parse(a)):String(c).match(new RegExp("^"+this.pathtoken))&&(this.debug&&console.log("checking "+c+" pathtoken"),t[s]=this.get_json_pointer(c,i)),null!=(null!=(u=t[s])?u.length:void 0)&&0===(null!=(h=t[s])?h.length:void 0)&&this.debug?l.push(console.log(c+" reference not found")):l.push(void 0)):"object"==typeof p?l.push(this.replace(p,r,i)):l.push(void 0);return l},this.extend=function(t){var e,n,r,i,o,s;if("object"==typeof t){for(e in r=[],t){if(s=t[e],e===this.extendtoken&&null!=s[this.reftoken]){for(i in n=this.get_json_pointer(s[this.reftoken],t),s)o=s[i],i!==this.reftoken&&(n[i]=o);delete t[e]}"object"==typeof s?r.push(s=this.extend(s)):r.push(void 0)}return r}},this.resolve=function(t){var e;return e={},this.findIds(t,e),this.debug&&Object.keys(e).length&&console.dir(e),this.replace(t,e,t),t},this.evaluate=function(t,e,n){var r,i,o;for(r in null==n&&(n=this.evaluateStr),i=this.clone(t))"string"==typeof(o=i[r])&&(t[r]=n(o,e)),"object"==typeof o&&(t[r]=this.evaluate(o,e));return t},this.evaluateStr=function(e,n){if("string"!=typeof e)return e;if("{"!==e[0]||"}"!==e[e.length-1])return e.replace(/(\{)(.*?)(\})/g,function(e,r,i){var o,s;if(s="",null==n||null==i)return s;if(null!=n[i]&&"function"==typeof n[i])s=n[i]();else if(null!=n[i])s=n[i];else{try{i=i.replace(new RegExp("^"+this.pathtoken+"/"),"").replace(/\//g,"."),s=t.getter(i)(n)}catch(o){o,s=""}null==s&&(s="")}return this.evaluateStr(s,n),s});try{return t.getter(e.replace(/^{/,"").replace(/}$/,""))(n)}catch(t){return null}},this}()}).call(this);
